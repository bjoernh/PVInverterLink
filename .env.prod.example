# Production Environment Configuration
# Copy this file to .env.prod and update with your actual values
# CRITICAL: Use strong, unique passwords and secrets!
# CRITICAL: Enable HTTPS and set COOKIE_SECURE=True before going live!

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql+asyncpg://deyehard:STRONG_PRODUCTION_PASSWORD@db-prod:5432/deyehard
POSTGRES_USER=deyehard
POSTGRES_PASSWORD=STRONG_PRODUCTION_PASSWORD
POSTGRES_DB=deyehard

# =============================================================================
# Security Settings - CRITICAL!
# =============================================================================
# Generate strong AUTH_SECRET (32+ characters): openssl rand -hex 32
AUTH_SECRET=GENERATE_STRONG_UNIQUE_32_CHAR_STRING_FOR_PRODUCTION

# Generate strong ENCRYPTION_KEY: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=GENERATE_STRONG_UNIQUE_FERNET_KEY_FOR_PRODUCTION

# IMPORTANT: Set to True when HTTPS is enabled!
COOKIE_SECURE=True

# =============================================================================
# Application Settings
# =============================================================================
BASE_URL=https://yourdomain.com
TZ=Europe/Berlin

# Store detailed DC channel (MPPT) measurements
STORE_DC_CHANNEL_DATA=true

# =============================================================================
# Email Configuration - REQUIRED FOR PRODUCTION
# =============================================================================
# Email is required for user verification and password resets
FASTMAIL__SUPPRESS_SEND=false
FASTMAIL__MAIL_USERNAME=production@yourdomain.com
FASTMAIL__MAIL_PASSWORD=your-production-smtp-password
FASTMAIL__MAIL_FROM=noreply@yourdomain.com
FASTMAIL__MAIL_SERVER=smtp.yourdomain.com
FASTMAIL__MAIL_PORT=587
FASTMAIL__MAIL_FROM_NAME=Solar Inverter Management
FASTMAIL__MAIL_STARTTLS=true
FASTMAIL__MAIL_SSL_TLS=false
FASTMAIL__USE_CREDENTIALS=true
FASTMAIL__VALIDATE_CERTS=true

# =============================================================================
# OpenTelemetry Configuration
# =============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://signoz-otel-collector-prod:4317
OTEL_SERVICE_NAME=solar-backend-production
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# Optional: Sampling rate for traces (1.0 = 100%, 0.1 = 10%)
# OTEL_TRACES_SAMPLER=parentbased_traceidratio
# OTEL_TRACES_SAMPLER_ARG=1.0

# =============================================================================
# Collector Configuration
# =============================================================================
COLLECTOR_PORT=10000
COLLECTOR_BACKEND_URL=http://backend-prod:80

# =============================================================================
# Monitoring & Observability
# =============================================================================
# SignOz ClickHouse credentials
CLICKHOUSE_USER=signoz
CLICKHOUSE_PASSWORD=STRONG_PRODUCTION_CLICKHOUSE_PASSWORD
CLICKHOUSE_DB=signoz

# =============================================================================
# Advanced Settings
# =============================================================================
# Keep DEBUG=False in production to avoid verbose logging
DEBUG=False
WEB_DEV_TESTING=False

# =============================================================================
# Production Security Checklist
# =============================================================================
# Before going live, ensure:
# [ ] All passwords are strong and unique (minimum 20 characters)
# [ ] AUTH_SECRET is different from test/staging
# [ ] ENCRYPTION_KEY is different from test/staging
# [ ] COOKIE_SECURE=True (requires HTTPS)
# [ ] BASE_URL uses https:// protocol
# [ ] Email sending is configured and tested
# [ ] File permissions are restricted (chmod 600 .env.prod)
# [ ] Firewall is configured and active
# [ ] SSL/TLS certificates are installed
# [ ] Backups are scheduled and tested
# [ ] Monitoring alerts are configured
# [ ] Admin password is changed from default
