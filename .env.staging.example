# Staging Environment Configuration
# Copy this file to .env.staging and update with your actual values
# IMPORTANT: Use different passwords and secrets than test/production!

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql+asyncpg://deyehard:CHANGE_PASSWORD_STAGING@db-staging:5432/deyehard
POSTGRES_USER=deyehard
POSTGRES_PASSWORD=CHANGE_PASSWORD_STAGING
POSTGRES_DB=deyehard

# =============================================================================
# Security Settings
# =============================================================================
# Generate AUTH_SECRET: openssl rand -hex 32
AUTH_SECRET=GENERATE_DIFFERENT_32_CHAR_STRING_FOR_STAGING

# Generate ENCRYPTION_KEY: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=GENERATE_DIFFERENT_FERNET_KEY_FOR_STAGING

# Cookie security (False for HTTP, True for HTTPS)
COOKIE_SECURE=False

# =============================================================================
# Application Settings
# =============================================================================
BASE_URL=http://staging.solar.64b.de
TZ=Europe/Berlin

# Store detailed DC channel (MPPT) measurements
STORE_DC_CHANNEL_DATA=true

# =============================================================================
# Docker Registry & Deployment
# =============================================================================
# Docker image tag to use (staging, v1.x.x-rc.1, or sha-xxxxx)
IMAGE_TAG=staging

# =============================================================================
# Email Configuration
# =============================================================================
# Staging can send real emails for testing email flows
FASTMAIL__SUPPRESS_SEND=false
FASTMAIL__MAIL_USERNAME=staging@yourdomain.com
FASTMAIL__MAIL_PASSWORD=your-smtp-password
FASTMAIL__MAIL_FROM=noreply-staging@yourdomain.com
FASTMAIL__MAIL_SERVER=smtp.yourdomain.com
FASTMAIL__MAIL_PORT=587
FASTMAIL__MAIL_FROM_NAME=Solar Backend Staging
FASTMAIL__MAIL_STARTTLS=true
FASTMAIL__MAIL_SSL_TLS=false
FASTMAIL__USE_CREDENTIALS=true
FASTMAIL__VALIDATE_CERTS=true

# =============================================================================
# OpenTelemetry Configuration
# =============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://signoz-otel-collector-staging:4317
OTEL_SERVICE_NAME=solar-backend-staging
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# =============================================================================
# Collector Configuration
# =============================================================================
COLLECTOR_PORT=10001  # Different port than test/prod
COLLECTOR_BACKEND_URL=http://backend-staging:80

# =============================================================================
# Monitoring & Observability
# =============================================================================
# SignOz ClickHouse credentials
CLICKHOUSE_USER=signoz
CLICKHOUSE_PASSWORD=signoz_password_staging
CLICKHOUSE_DB=signoz

# =============================================================================
# Advanced Settings
# =============================================================================
DEBUG=False
WEB_DEV_TESTING=False
